<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta name="referrer" content="no-referrer">
    <meta charset="UTF-8" />
    <title>曝光组件</title>
    <style>
        body,html {
            padding: 0;
            margin: 0;
        }
        ul,
        li {
            padding: 0;
            margin: 0;
            list-style: none;
            display: block;
        }
        .clearfix:after {
            content: '';
            display: block;
            clear: both;
        }
        .img-box {
            width: 800px;
            margin: 0 auto;
            border: 1px solid #ccc;
        }
        .img-list > li {
            float: left;
            margin-left: 60px;
        }

        .img-list > li >img {
            width: 300px;
            height: 500px;
        }
        

    </style>
</head>
<body>
    <div class="img-box clearfix">
        <ul class="img-list clearfix">
            <li><img src="https://b-ssl.duitang.com/uploads/item/201701/31/20170131135613_Chxd8.thumb.700_0.jpeg" alt="" data-img="https://b-ssl.duitang.com/uploads/item/201603/05/20160305160124_f2TiQ.thumb.700_0.jpeg"/></li>
            <li><img src="https://b-ssl.duitang.com/uploads/item/201701/31/20170131135613_Chxd8.thumb.700_0.jpeg" alt="" data-img="https://b-ssl.duitang.com/uploads/item/201611/30/20161130190401_U5zwP.thumb.700_0.png"/></li>
            <li><img src="https://b-ssl.duitang.com/uploads/item/201701/31/20170131135613_Chxd8.thumb.700_0.jpeg" alt="" data-img="https://a-ssl.duitang.com/uploads/item/201408/18/20140818205744_unFBx.thumb.700_0.jpeg"/></li>
            <li><img src="https://b-ssl.duitang.com/uploads/item/201701/31/20170131135613_Chxd8.thumb.700_0.jpeg" alt="" data-img="https://b-ssl.duitang.com/uploads/item/201408/18/20140818205810_FziV3.thumb.700_0.jpeg"/></li>
            <li><img src="https://b-ssl.duitang.com/uploads/item/201701/31/20170131135613_Chxd8.thumb.700_0.jpeg" alt="" data-img="https://b-ssl.duitang.com/uploads/item/201510/30/20151030231058_TuMhU.thumb.700_0.png"/></li>
            <li><img src="" alt="" data-img="https://b-ssl.duitang.com/uploads/item/201609/08/20160908142848_XZR2t.thumb.700_0.jpeg"/></li>
            <li><img src="https://b-ssl.duitang.com/uploads/item/201701/31/20170131135613_Chxd8.thumb.700_0.jpeg" alt="" data-img="https://b-ssl.duitang.com/uploads/item/201605/05/20160505225546_582wC.thumb.700_0.jpeg"/></li>
            <li><img src="https://b-ssl.duitang.com/uploads/item/201701/31/20170131135613_Chxd8.thumb.700_0.jpeg" alt="" data-img="https://b-ssl.duitang.com/uploads/item/201702/17/20170217182832_u5E3A.thumb.700_0.jpeg"/></li>
            <li><img src="https://b-ssl.duitang.com/uploads/item/201701/31/20170131135613_Chxd8.thumb.700_0.jpeg" alt="" data-img="https://b-ssl.duitang.com/uploads/item/201702/17/20170217182822_h4BZM.thumb.700_0.jpeg"/></li>
            <li><img src="https://b-ssl.duitang.com/uploads/item/201701/31/20170131135613_Chxd8.thumb.700_0.jpeg" alt="" data-img="https://b-ssl.duitang.com/uploads/item/201508/21/20150821001900_JVvsn.thumb.700_0.jpeg"/></li>
            <li><img src="https://b-ssl.duitang.com/uploads/item/201701/31/20170131135613_Chxd8.thumb.700_0.jpeg" alt="" data-img="https://b-ssl.duitang.com/uploads/item/201506/22/20150622130901_XTUfR.thumb.700_0.jpeg"/></li>
            <li><img src="https://b-ssl.duitang.com/uploads/item/201701/31/20170131135613_Chxd8.thumb.700_0.jpeg" alt="" data-img="https://b-ssl.duitang.com/uploads/item/201601/12/20160112175912_aSZAF.thumb.700_0.jpeg"/></li>
            <li><img src="https://b-ssl.duitang.com/uploads/item/201701/31/20170131135613_Chxd8.thumb.700_0.jpeg" alt="" data-img="https://b-ssl.duitang.com/uploads/item/201601/19/20160119231226_H3ks8.thumb.700_0.jpeg"/></li>
            <li><img src="https://b-ssl.duitang.com/uploads/item/201701/31/20170131135613_Chxd8.thumb.700_0.jpeg" alt="" data-img="https://b-ssl.duitang.com/uploads/item/201612/09/20161209195837_4VUBz.thumb.700_0.jpeg"/></li>
            <li><img src="https://b-ssl.duitang.com/uploads/item/201701/31/20170131135613_Chxd8.thumb.700_0.jpeg" alt="" data-img="https://b-ssl.duitang.com/uploads/item/201612/10/20161210205507_SCuyM.thumb.700_0.png"/></li>
            <li><img src="https://b-ssl.duitang.com/uploads/item/201701/31/20170131135613_Chxd8.thumb.700_0.jpeg" alt="" data-img="https://b-ssl.duitang.com/uploads/item/201402/20/20140220231557_JuK58.thumb.700_0.jpeg"/></li>
            <li><img src="https://b-ssl.duitang.com/uploads/item/201701/31/20170131135613_Chxd8.thumb.700_0.jpeg" alt="" data-img="https://b-ssl.duitang.com/uploads/item/201503/07/20150307154439_fNc2L.thumb.700_0.jpeg"/></li>
            <li><img src="https://b-ssl.duitang.com/uploads/item/201701/31/20170131135613_Chxd8.thumb.700_0.jpeg" alt="" data-img="https://b-ssl.duitang.com/uploads/item/201601/16/20160116163707_rmkXR.thumb.700_0.jpeg"/></li>
            <li><img src="https://b-ssl.duitang.com/uploads/item/201701/31/20170131135613_Chxd8.thumb.700_0.jpeg" alt="" data-img="https://b-ssl.duitang.com/uploads/item/201504/11/20150411H1835_GZm4a.thumb.700_0.jpeg"/></li>
            <li><img src="https://b-ssl.duitang.com/uploads/item/201701/31/20170131135613_Chxd8.thumb.700_0.jpeg" alt="" data-img="https://b-ssl.duitang.com/uploads/item/201505/22/20150522201242_KCE4m.thumb.700_0.jpeg"/></li>
        </ul>
    </div>
</body>
<script src="https://cdn.bootcss.com/jquery/3.0.0/jquery.js"></script>
<script>
    var Exposure = (function() {
        function _Exposure($target, callback) {         
            this.$target = $target;
            this.callback = callback;
            this.bind();
            this.check();

        }

        _Exposure.prototype.bind = function() {        // 绑定事件
            var that = this;
            $(window).on('scroll', that.check.bind(that));
        }

        _Exposure.prototype.isShow = function() {     // 检测元素是否在可视范围
            var windowHeight = $(window).height(),
                scrollTop = $(window).scrollTop(),
                offsetTop = $(this.$target).offset().top;
                nodeHeight = $(this.$target).outerHeight(true);
            if( windowHeight + scrollTop > offsetTop && scrollTop < offsetTop + nodeHeight) {
                return true;
            } else {
                return false;
            }            
        }

        _Exposure.prototype.check = function() {            // 滚动执行函数
            if($(this.$target).hasClass('show')) return;
            if(this.isShow()) {
                this.callback();
            }
        }

        return {                                            
            init: function($target, callback) {
                $target.each(function(index, target) {      // 遍历元素对象，给每个对象new一个实例
                    new _Exposure(target, callback);    
                })
            }
        }
    })();

    Exposure.init($('.img-list li img'), function() {           // Exposure.init（ 元素， 执行函数  ）
            var imgUrl = $(this.$target).attr('data-img');
            $(this.$target).attr('src', imgUrl);
            $(this.$target).addClass('show');
        });
</script>
</html>